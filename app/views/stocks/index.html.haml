- content_for :aside do
  = simple_form_for @search, :url => collection_path, :html => {:novalidate => true} do |f|
    = f.input :name_contains
    = f.input :sector_contains, :collection => Stock::SECTOR_NAMES, :prompt => "Any"

    =f.submit 'Search'

#stocks
  %table
    %tr
      %th= sort_link @search, :name
      %th= sort_link @search, :sector
      %th= sort_link @search, :beta
      %th= sort_link @search, :pe
      %th= sort_link @search, :eps

    - @stocks.each do |stock|
      %tr
        %td= link_to stock.name, resource_path(stock)
        %td= stock.sector
        %td= stock.beta
        %td= stock.pe
        %td= stock.eps
#stock

:javascript
  $(function() {
    window.router = new Finginie.Routers.StocksRouter({stocks: #{@stocks.to_json.html_safe}});
    Backbone.history.start();
  });

