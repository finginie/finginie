= render 'current_portfolio'

%h1 Fixed Deposits Analysis
- unless resource.fixed_deposit_open_positions_rate_of_interests.empty?
  #fixed-deposits-chart.chart{ data: { elements: [['Rate','Amount']] + resource.fixed_deposit_open_positions_rate_of_interests.map{ |fd| [fd.rate.to_s, fd.amount] },
                               title: 'Fixed Deposits', yAxisTitle: 'Amount Invested (Rs)', xAxisTitle: 'Interest Rate p.a.(%)', chartType: 'Column' } }
  %h2 Interest rate wise Analysis
  %table.table.table-striped
    %tr
      %th.name Name
      %th Interest Rate
      %th Invested Amount
    %tr
      %td
      %td (%)
      %td (Rs)
    - resource.fixed_deposit_open_positions_rate_of_interests.each do |hsh|
      %tr
        %td.name= hsh.name
        %td= hsh.rate
        %td= number_to_indian_currency hsh.amount
    %tr.total
      %td.name Total
      %td
      %td= number_to_indian_currency resource.fixed_deposit_open_positions_rate_of_interests.sum(&:amount)
-else
  #no_portfolios
    %p= t ".no_fixed_deposit_transaction"
    %p
      = link_to "Click here", new_portfolio_fixed_deposit_transaction_path(resource)
      = "to add some."
