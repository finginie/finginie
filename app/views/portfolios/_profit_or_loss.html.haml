%table
  %tr
    %th.name Security
    %th.security_type Security Type
    %th.name Quantity
    %th.name Avg Cost Price
    %th.name Avg Sell Price
    - profit_or_loss = net_income.sum(&:profit_or_loss) > 0 ? "profit" : "loss"
    %th{ :class => profit_or_loss}= profit_or_loss.titleize
    %th.percentage= "#{profit_or_loss.titleize} Percentage"
  %tr
    %td
    %td
    %td
    %td.right (Rs)
    %td.right (Rs)
    %td.right (Rs)
    %td.right (%)
  - net_income.each do |security|
    %tr
      %td= security.name
      %td.center= security.type
      %td.center= security.quantity ? security.quantity : ""
      %td.center= security.average_cost_price ? number_to_indian_currency(security.average_cost_price) : ""
      %td.center= security.average_sell_price ? number_to_indian_currency(security.average_sell_price) : ""
      = table_content_with_red_or_green_class security.profit_or_loss
      = table_content_with_red_or_green_class security.percentage
  %tr.total
    %td Total
    %td
    %td
    %td
    %td
    %td.right= number_to_indian_currency net_income.sum(&:profit_or_loss).round(2)
    %td
